<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cloudflare accounts & domains</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app">
      <header>
        <div>
          <p class="eyebrow">Cloudflare Tunnel Manager</p>
          <h1>Cloudflare accounts & domains</h1>
          <p class="subtitle">
            Manage connected Cloudflare accounts, validate tokens, and review
            domain availability for named tunnels.
          </p>
          <div class="header-actions">
            <a class="secondary-btn" href="/index.html">Back to dashboard</a>
            <a class="secondary-btn" href="/create.html">Back to create</a>
          </div>
        </div>
        <div class="status-card">
          <h2>Account checklist</h2>
          <ul>
            <li>Tokens need Tunnel + DNS edit permissions.</li>
            <li>Refresh accounts to sync domain access.</li>
            <li>Domains are pulled from the Cloudflare Zones API.</li>
          </ul>
        </div>
      </header>

      <main>
        <section class="form-panel full-panel">
          <h2>Manage Cloudflare accounts</h2>
          <p class="muted">
            Add new accounts, validate tokens, and explore available zones for
            each account. Named tunnels will use these credentials.
          </p>
          <div class="stack">
            <form id="account-form">
              <h3>Add a Cloudflare account</h3>
              <label for="account-label">Account label</label>
              <input
                id="account-label"
                name="account-label"
                type="text"
                placeholder="Marketing account"
                required
              />
              <label for="account-email">Account email</label>
              <input
                id="account-email"
                name="account-email"
                type="email"
                placeholder="owner@example.com"
                required
              />
              <label for="account-id">Cloudflare account ID</label>
              <input
                id="account-id"
                name="account-id"
                type="text"
                placeholder="a1b2c3d4"
                required
              />
              <div class="auth-options">
                <span class="label">Authentication</span>
                <label class="radio">
                  <input
                    type="radio"
                    name="auth-type"
                    value="token"
                    checked
                  />
                  Use API token
                </label>
                <label class="radio">
                  <input
                    type="radio"
                    name="auth-type"
                    value="cloudflared"
                  />
                  Login via browser
                </label>
              </div>
              <div class="token-fields" data-auth="token">
                <label for="account-token">Cloudflare API token</label>
                <input
                  id="account-token"
                  name="account-token"
                  type="password"
                  placeholder="Token with Tunnel + DNS edit permissions"
                  required
                />
              </div>
              <div class="browser-login" data-auth="cloudflared">
                <p class="helper">
                  Use the browser login to connect cloudflared and generate a
                  certificate for this account.
                </p>
                <button id="start-browser-login" type="button">
                  Start browser login
                </button>
                <div class="login-status">
                  <span class="muted">Login status:</span>
                  <span id="login-status-text">Idle</span>
                </div>
                <div class="login-link">
                  <span class="muted">Login URL:</span>
                  <a id="login-url" href="#" target="_blank" rel="noreferrer"></a>
                </div>
              </div>
              <p id="account-form-status" class="helper"></p>
              <button type="submit">Add account</button>
            </form>
            <div class="account-panel">
              <div class="list-header">
                <div>
                  <h3>Connected accounts</h3>
                  <p class="muted">
                    Validate token access to refresh connected status.
                  </p>
                </div>
                <button id="refresh-accounts" type="button">Refresh</button>
              </div>
              <p id="account-list-status" class="helper"></p>
              <div id="account-list" class="account-list"></div>
            </div>
            <div>
              <div class="list-header">
                <div>
                  <h3>Available domains</h3>
                  <p class="helper">
                    Select an account to view domains available for named
                    tunnels.
                  </p>
                </div>
                <select id="account-select">
                  <option value="">Select an account</option>
                </select>
              </div>
              <div id="domain-list" class="domain-list"></div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script src="cloudflare.js"></script>
  </body>
</html>
